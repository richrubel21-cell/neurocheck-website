<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>NeuroCheck AI ‚Äî Clinical Prototype</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.10.3/Recharts.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600;700&family=DM+Sans:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{
--bg:#060a11;--s1:#0c1220;--s2:#131c2e;--s3:#1a2640;--s4:#223050;
--bdr:#1e2d45;--bdr2:#2a3d5a;
--tx:#e8ecf4;--tx2:#8e9bb8;--tx3:#5a6a85;
--teal:#1de9b6;--teal2:#00bfa5;--tealG:rgba(29,233,182,.08);--tealG2:rgba(29,233,182,.15);
--red:#ff5252;--redG:rgba(255,82,82,.1);
--amber:#ffab40;--amberG:rgba(255,171,64,.1);
--blue:#448aff;--blueG:rgba(68,138,255,.1);
--green:#69f0ae;--greenG:rgba(105,240,174,.1);
--purple:#b388ff;
--f:'DM Sans',system-ui,sans-serif;--m:'IBM Plex Mono',monospace;
}
html,body,#root{height:100%;overflow:hidden}
body{font-family:var(--f);background:var(--bg);color:var(--tx);-webkit-font-smoothing:antialiased}
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--bdr);border-radius:3px}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:none}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes alertPulse{0%,100%{box-shadow:0 0 0 0 rgba(255,82,82,.3)}50%{box-shadow:0 0 30px 10px rgba(255,82,82,.15)}}
@keyframes scan{0%{top:-2px}100%{top:100%}}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState,useEffect,useRef,useCallback} = React;
const {LineChart,Line,AreaChart,Area,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer,BarChart,Bar,Legend,ReferenceLine} = Recharts;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const PATIENT = {name:'Margaret Chen',age:74,sex:'F',mrn:'HMC-7742901',bed:'Neuro ICU 4B',dx:'L MCA aneurysm clipping',hx:'HTN, T2DM, mild cognitive impairment',attending:'Dr. C. Bowers, MD',postOp:'Day 2',bmi:22.1,weight:'52kg',allergies:'PCN, Sulfa'};

const CN_TESTS = [
  {id:'II',name:'Visual Acuity',prompt:'Look at the center point',desc:'Pupil response & visual tracking',action:'eyeCenter',dur:3200},
  {id:'III',name:'Oculomotor',prompt:'Look UP',desc:'Superior rectus ‚Äî upward gaze',action:'eyeUp',dur:2800},
  {id:'IV',name:'Trochlear',prompt:'Look DOWN and IN',desc:'Superior oblique ‚Äî downward gaze',action:'eyeDownIn',dur:2800},
  {id:'V',name:'Trigeminal',prompt:'Clench your JAW',desc:'Masseter & temporalis activation',action:'jawClench',dur:3000},
  {id:'VI',name:'Abducens',prompt:'Look LEFT ‚Äî then RIGHT',desc:'Lateral rectus ‚Äî horizontal tracking',action:'eyeLR',dur:3500},
  {id:'VII',name:'Facial',prompt:'SMILE widely',desc:'Bilateral facial symmetry analysis',action:'smile',dur:3200},
  {id:'IX',name:'Glossopharyngeal',prompt:'Say "AHHH"',desc:'Palatal elevation & phonation',action:'mouth',dur:2800},
  {id:'X',name:'Vagus',prompt:'SWALLOW',desc:'Laryngeal movement tracking',action:'swallow',dur:2800},
  {id:'XI',name:'Accessory',prompt:'Shrug SHOULDERS up',desc:'Trapezius / SCM contraction',action:'shrug',dur:3200},
  {id:'XII',name:'Hypoglossal',prompt:'Stick out your TONGUE',desc:'Tongue protrusion & symmetry',action:'tongue',dur:3200},
];

const GCS_HISTORY = [
  {day:'Day 0',gcs:11,e:3,v:3,m:5},{day:'Day 0.5',gcs:12,e:3,v:4,m:5},{day:'Day 1',gcs:13,e:4,v:4,m:5},
  {day:'Day 1.5',gcs:14,e:4,v:4,m:6},{day:'Day 2',gcs:14,e:4,v:4,m:6},{day:'Day 2\n(now)',gcs:15,e:4,v:5,m:6},
];
const DELIRIUM_HISTORY = [
  {day:'Day 0',cam:5,rass:-2},{day:'Day 0.5',cam:4,rass:-1},{day:'Day 1',cam:4,rass:-1},
  {day:'Day 1.5',cam:3,rass:0},{day:'Day 2',cam:2,rass:0},{day:'Day 2\n(now)',cam:3,rass:-1},
];
const FRAILTY_HISTORY = [
  {day:'Pre-Op',cfs:4,temp:9.2,grip:16.1},{day:'Day 0',cfs:6,temp:8.8,grip:12.4},
  {day:'Day 1',cfs:5,temp:8.4,grip:13.8},{day:'Day 2\n(now)',cfs:5,temp:7.8,grip:14.2},
];
const ALERTS = [
  {id:1,time:'14:32',severity:'high',title:'Delirium Score Increase',desc:'CAM-ICU-7 rose from 2‚Üí3. Inattention +1, altered consciousness detected. RASS shifted to -1.',action:'Notify attending. Consider reorientation protocol. Review sedation orders.',module:'CAM-ICU-7',value:'3/7'},
  {id:2,time:'14:28',severity:'high',title:'Temporalis Wasting Below Threshold',desc:'Temporalis muscle thickness measured at 7.8mm, below 10mm sarcopenia threshold. Decline of 1.4mm since pre-op baseline.',action:'Nutrition consult. Consider protein supplementation. PT evaluation for strength program.',module:'Frailty',value:'7.8mm'},
  {id:3,time:'14:25',severity:'medium',title:'Fall Risk Elevated',desc:'Hopkins Fall Risk Assessment Tool scored HIGH based on composite: CFS 5, grip strength 14.2kg (below 16kg threshold), gait instability observed.',action:'Fall precautions. Bed alarm. 1:1 sitter evaluation. PT clearance before ambulation.',module:'Frailty',value:'HIGH'},
  {id:4,time:'09:15',severity:'low',title:'GCS Improvement Noted',desc:'GCS improved from 14 to 15 (verbal component 4‚Üí5). Patient oriented x3, following commands.',action:'Continue monitoring. Document improvement in progress note.',module:'GCS',value:'15/15'},
  {id:5,time:'08:00',severity:'low',title:'CN Assessment Baseline Updated',desc:'All cranial nerves II-XII assessed intact. CN VII mild asymmetry resolved from Day 1. New baseline stored.',action:'No intervention required. Update UPI longitudinal record.',module:'CN Testing',value:'10/10'},
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FACE CANVAS ‚Äî ELDERLY ICU PATIENT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function FaceCanvas({cnStep,phase,elapsed}){
  const ref = useRef(null);
  const frame = useRef(0);

  const draw = useCallback(()=>{
    const c=ref.current; if(!c) return;
    const X=c.getContext('2d');
    const w=c.width,h=c.height;
    frame.current++;
    const t=frame.current;

    // Face params based on current CN test
    let eyeX=0,eyeY=0,mouthOpen=0,tongueOut=0,smile=0,jaw=0,shrug=0,brow=0;
    const action = cnStep>=0 && cnStep<CN_TESTS.length ? CN_TESTS[cnStep].action : 'idle';
    const prog = elapsed||0;

    switch(action){
      case 'eyeCenter': eyeX=0;eyeY=0; break;
      case 'eyeUp': eyeY=-1; brow=0.3; break;
      case 'eyeDownIn': eyeY=0.7;eyeX=0.3; break;
      case 'jawClench': jaw=1; break;
      case 'eyeLR': eyeX=Math.sin(t*0.08)*1; break;
      case 'smile': smile=1; break;
      case 'mouth': mouthOpen=0.7; break;
      case 'swallow': {const p=(t%50)/50; brow=Math.sin(p*Math.PI)*0.2;} break;
      case 'shrug': shrug=1; break;
      case 'tongue': mouthOpen=0.4;tongueOut=1; break;
    }

    X.clearRect(0,0,w,h);

    // ‚îÄ‚îÄ ICU ROOM BACKGROUND ‚îÄ‚îÄ
    const bgG=X.createLinearGradient(0,0,0,h);
    bgG.addColorStop(0,'#0a0f18');bgG.addColorStop(0.5,'#0d1420');bgG.addColorStop(1,'#060a10');
    X.fillStyle=bgG;X.fillRect(0,0,w,h);

    // Ceiling tiles
    X.strokeStyle='rgba(255,255,255,0.015)';X.lineWidth=1;
    for(let i=0;i<w;i+=80){X.beginPath();X.moveTo(i,0);X.lineTo(i,h*0.15);X.stroke();}

    // IV Pole (left side)
    X.strokeStyle='rgba(180,190,210,0.25)';X.lineWidth=2;
    X.beginPath();X.moveTo(w*0.12,h*0.1);X.lineTo(w*0.12,h*0.85);X.stroke();
    // IV bag
    X.fillStyle='rgba(100,180,255,0.12)';
    X.fillRect(w*0.09,h*0.08,w*0.06,h*0.1);
    X.strokeStyle='rgba(100,180,255,0.25)';X.strokeRect(w*0.09,h*0.08,w*0.06,h*0.1);
    // IV line
    X.strokeStyle='rgba(100,180,255,0.15)';X.lineWidth=1;
    X.beginPath();X.moveTo(w*0.12,h*0.18);X.quadraticCurveTo(w*0.2,h*0.3,w*0.35,h*0.55);X.stroke();

    // Monitor (right side)
    X.fillStyle='rgba(15,25,40,0.8)';
    X.fillRect(w*0.78,h*0.05,w*0.18,h*0.22);
    X.strokeStyle='rgba(29,233,182,0.2)';X.lineWidth=1;
    X.strokeRect(w*0.78,h*0.05,w*0.18,h*0.22);
    // Heart rate line
    X.strokeStyle='rgba(29,233,182,0.5)';X.lineWidth=1.5;X.beginPath();
    for(let i=0;i<30;i++){
      const px=w*0.79+i*(w*0.16/30);
      const py=h*0.12+Math.sin((i+t*0.5)*0.5)*8+(i===15?-20:i===16?15:0);
      i===0?X.moveTo(px,py):X.lineTo(px,py);
    }
    X.stroke();
    // HR number
    X.font='bold 14px "IBM Plex Mono"';X.fillStyle='rgba(29,233,182,0.7)';
    X.fillText('HR 72',w*0.8,h*0.22);
    X.fillStyle='rgba(255,171,64,0.6)';X.fillText('SpO2 97%',w*0.87,h*0.22);

    // Bed rails (subtle)
    X.strokeStyle='rgba(150,160,180,0.12)';X.lineWidth=3;
    X.beginPath();X.moveTo(w*0.2,h*0.75);X.lineTo(w*0.2,h*0.95);X.stroke();
    X.beginPath();X.moveTo(w*0.8,h*0.75);X.lineTo(w*0.8,h*0.95);X.stroke();

    // Pillow
    X.beginPath();
    X.ellipse(w/2,h*0.62,w*0.22,h*0.08,0,0,Math.PI*2);
    X.fillStyle='rgba(200,210,220,0.08)';X.fill();
    X.strokeStyle='rgba(200,210,220,0.06)';X.stroke();

    // Hospital wristband glow (on right wrist area)
    X.fillStyle='rgba(255,255,255,0.04)';
    X.fillRect(w*0.62,h*0.72,w*0.04,h*0.015);

    // ‚îÄ‚îÄ DRAW ELDERLY FACE ‚îÄ‚îÄ
    const cx=w/2, cy=h/2-h*0.04;
    const sc=Math.min(w/800,h/600)*0.95;

    X.save();
    X.translate(cx,cy);
    X.scale(sc,sc);

    // Breathing
    const breathY=Math.sin(t*0.015)*2;
    X.translate(0,breathY);

    // ‚îÄ‚îÄ Shoulders + hospital gown ‚îÄ‚îÄ
    const shY=195-shrug*22;
    X.beginPath();X.moveTo(-155,shY+35);X.quadraticCurveTo(-115,shY,0,shY-8);X.quadraticCurveTo(115,shY,155,shY+35);
    X.lineTo(155,290);X.lineTo(-155,290);X.closePath();
    const gownG=X.createLinearGradient(0,shY,0,290);
    gownG.addColorStop(0,'#4a6a7a');gownG.addColorStop(1,'#2a4a5a');
    X.fillStyle=gownG;X.fill();
    // Gown pattern (subtle hospital pattern)
    X.strokeStyle='rgba(255,255,255,0.03)';X.lineWidth=0.5;
    for(let i=-150;i<160;i+=12){X.beginPath();X.moveTo(i,shY);X.lineTo(i,290);X.stroke();}

    // Neck (thinner, elderly)
    X.beginPath();X.moveTo(-25,148);X.lineTo(-28,shY);X.lineTo(28,shY);X.lineTo(25,148);X.closePath();
    X.fillStyle='#c49a70';X.fill();
    // Neck wrinkles
    X.strokeStyle='rgba(0,0,0,0.08)';X.lineWidth=0.8;
    for(let i=0;i<3;i++){X.beginPath();X.moveTo(-20,155+i*12);X.quadraticCurveTo(0,158+i*12,20,155+i*12);X.stroke();}

    // ‚îÄ‚îÄ Head ‚Äî elderly proportions (slightly sunken) ‚îÄ‚îÄ
    X.beginPath();
    X.ellipse(0,0,98,125,0,0,Math.PI*2);
    const skinG=X.createRadialGradient(-15,-15,8,0,0,125);
    skinG.addColorStop(0,'#dbb890');skinG.addColorStop(0.5,'#c9a578');skinG.addColorStop(1,'#b08e60');
    X.fillStyle=skinG;X.fill();

    // Cheek hollowing (elderly sunken cheeks)
    X.beginPath();X.ellipse(-65,25,18,30,0.2,0,Math.PI*2);
    X.fillStyle='rgba(160,120,80,0.15)';X.fill();
    X.beginPath();X.ellipse(65,25,18,30,-0.2,0,Math.PI*2);
    X.fillStyle='rgba(160,120,80,0.15)';X.fill();

    // ‚îÄ‚îÄ Hair ‚Äî thin, gray ‚îÄ‚îÄ
    X.beginPath();X.ellipse(0,-52,105,85,0,Math.PI,Math.PI*2);
    X.fillStyle='#8a8a8a';X.fill();
    // Thinning effect
    for(let i=0;i<40;i++){
      X.beginPath();
      const angle=Math.PI+Math.random()*Math.PI;
      const r=85+Math.random()*15;
      X.moveTo(Math.cos(angle)*90,-52+Math.sin(angle)*r*0.3);
      X.lineTo(Math.cos(angle)*(90+Math.random()*20),-52+Math.sin(angle)*(r*0.3+Math.random()*15));
      X.strokeStyle=`rgba(${150+Math.random()*50},${150+Math.random()*50},${155+Math.random()*50},${0.3+Math.random()*0.3})`;
      X.lineWidth=1+Math.random();X.stroke();
    }
    // Side hair
    X.beginPath();X.ellipse(-100,-5,15,55,0.2,0,Math.PI*2);X.fillStyle='#7a7a7a';X.fill();
    X.beginPath();X.ellipse(100,-5,15,55,-0.2,0,Math.PI*2);X.fillStyle='#7a7a7a';X.fill();

    // ‚îÄ‚îÄ Forehead wrinkles ‚îÄ‚îÄ
    X.strokeStyle='rgba(0,0,0,0.07)';X.lineWidth=0.8;
    for(let i=0;i<4;i++){
      X.beginPath();
      X.moveTo(-55,-85+i*10);X.quadraticCurveTo(0,-83+i*10+Math.sin(i)*3,55,-85+i*10);X.stroke();
    }

    // ‚îÄ‚îÄ Ears ‚îÄ‚îÄ
    [-1,1].forEach(s=>{
      X.beginPath();X.ellipse(s*95,10,14,26,s*0.1,0,Math.PI*2);
      X.fillStyle='#c49a70';X.fill();X.strokeStyle='rgba(0,0,0,0.08)';X.lineWidth=1;X.stroke();
    });

    // ‚îÄ‚îÄ TEMPORALIS REGION ‚Äî measurement overlay ‚îÄ‚îÄ
    if(action==='jawClench' || phase==='frailty'){
      [-1,1].forEach(s=>{
        // Temporalis muscle area highlight
        X.beginPath();X.ellipse(s*88,-20,22,35,s*0.15,0,Math.PI*2);
        X.fillStyle='rgba(255,171,64,0.12)';X.fill();
        X.strokeStyle='rgba(255,171,64,0.6)';X.lineWidth=1.5;X.setLineDash([4,3]);X.stroke();X.setLineDash([]);
        // Measurement line
        X.strokeStyle='rgba(255,82,82,0.8)';X.lineWidth=1.5;
        X.beginPath();X.moveTo(s*75,-35);X.lineTo(s*100,-35);X.stroke();
        X.beginPath();X.moveTo(s*75,-35);X.lineTo(s*75,-30);X.stroke();
        X.beginPath();X.moveTo(s*100,-35);X.lineTo(s*100,-30);X.stroke();
        // Measurement label
        X.font='bold 9px "IBM Plex Mono"';
        X.fillStyle='rgba(255,82,82,0.9)';
        X.fillText('7.8mm',s>0?78:-110,-40);
        X.font='7px "IBM Plex Mono"';
        X.fillStyle='rgba(255,171,64,0.7)';
        X.fillText('TEMPORALIS',s>0?76:-110,-50);
      });
    }

    // ‚îÄ‚îÄ Eyebrows (thinner, graying) ‚îÄ‚îÄ
    const browY=-58-brow*10;
    [-1,1].forEach(s=>{
      X.beginPath();X.moveTo(s*16,browY);X.quadraticCurveTo(s*42,browY-7-brow*4,s*65,browY+5);
      X.strokeStyle='#7a7a7a';X.lineWidth=2.5;X.lineCap='round';X.stroke();
    });

    // ‚îÄ‚îÄ Eyes (slightly droopy, aged) ‚îÄ‚îÄ
    const eyeBaseY=-28;
    [-1,1].forEach(s=>{
      const ex=s*40;
      // Slight droop on upper eyelid
      X.beginPath();X.ellipse(ex,eyeBaseY,24,16,0,0,Math.PI*2);
      X.fillStyle='#ede8e0';X.fill();
      // Upper eyelid droop
      X.beginPath();X.ellipse(ex,eyeBaseY-3,25,10,0,Math.PI,Math.PI*2);
      X.fillStyle='#c49a70';X.fill();
      // Crow's feet wrinkles
      X.strokeStyle='rgba(0,0,0,0.06)';X.lineWidth=0.6;
      for(let i=0;i<3;i++){
        X.beginPath();X.moveTo(ex+s*24,eyeBaseY-5+i*5);
        X.lineTo(ex+s*(30+i*4),eyeBaseY-8+i*6);X.stroke();
      }
      // Iris
      const ix=ex+eyeX*10, iy=eyeBaseY+eyeY*7;
      X.beginPath();X.arc(ix,iy,10,0,Math.PI*2);
      const iG=X.createRadialGradient(ix-1,iy-1,1,ix,iy,10);
      iG.addColorStop(0,'#6a8a5a');iG.addColorStop(0.7,'#4a6a3a');iG.addColorStop(1,'#2a4a1a');
      X.fillStyle=iG;X.fill();
      // Pupil
      X.beginPath();X.arc(ix,iy,4.5,0,Math.PI*2);X.fillStyle='#0a0a0a';X.fill();
      X.beginPath();X.arc(ix-2,iy-2,2,0,Math.PI*2);X.fillStyle='rgba(255,255,255,0.7)';X.fill();
      // Under-eye bags
      X.beginPath();X.ellipse(ex,eyeBaseY+14,18,5,0,0,Math.PI);
      X.fillStyle='rgba(120,90,70,0.12)';X.fill();
      // Eye outline
      X.beginPath();X.ellipse(ex,eyeBaseY,24,16,0,0,Math.PI*2);
      X.strokeStyle='rgba(0,0,0,0.1)';X.lineWidth=1;X.stroke();
    });

    // ‚îÄ‚îÄ Nose (slightly larger, aged) ‚îÄ‚îÄ
    X.beginPath();X.moveTo(-2,-12);X.quadraticCurveTo(-4,22,-16,38);X.quadraticCurveTo(0,45,16,38);X.quadraticCurveTo(4,22,2,-12);
    X.strokeStyle='rgba(0,0,0,0.08)';X.lineWidth=1.2;X.stroke();
    X.beginPath();X.ellipse(-8,38,5.5,4,0.3,0,Math.PI*2);X.fillStyle='rgba(160,120,80,0.2)';X.fill();
    X.beginPath();X.ellipse(8,38,5.5,4,-0.3,0,Math.PI*2);X.fillStyle='rgba(160,120,80,0.2)';X.fill();

    // Nasolabial folds (deep, elderly)
    X.strokeStyle='rgba(0,0,0,0.08)';X.lineWidth=1;
    [-1,1].forEach(s=>{
      X.beginPath();X.moveTo(s*18,30);X.quadraticCurveTo(s*28,50,s*22,72);X.stroke();
    });

    // ‚îÄ‚îÄ Mouth ‚îÄ‚îÄ
    const mY=72;
    const mW=32+smile*8;
    const mH=2+mouthOpen*28;
    const smC=smile*12;

    if(mouthOpen>0.05){
      // Open mouth
      X.beginPath();X.ellipse(0,mY+mH*0.4,mW*0.8,mH*0.5,0,0,Math.PI*2);X.fillStyle='#1a0808';X.fill();
      // Upper lip
      X.beginPath();X.moveTo(-mW,mY);X.quadraticCurveTo(-mW*0.5,mY-6-smC,0,mY-3);
      X.quadraticCurveTo(mW*0.5,mY-6-smC,mW,mY);X.quadraticCurveTo(mW*0.5,mY+mH*0.3,0,mY+mH*0.2);
      X.quadraticCurveTo(-mW*0.5,mY+mH*0.3,-mW,mY);
      X.fillStyle='#b06060';X.fill();
      // Teeth
      if(mouthOpen>0.2){X.fillStyle='#e8e4d8';X.fillRect(-mW*0.5,mY+1,mW,Math.min(mH*0.2,8));}
      // Lower lip
      X.beginPath();X.moveTo(-mW+3,mY+mH*0.6);X.quadraticCurveTo(0,mY+mH+2,mW-3,mY+mH*0.6);
      X.fillStyle='#a05555';X.fill();
    } else {
      // Closed mouth with smile
      X.beginPath();X.moveTo(-mW,mY);X.quadraticCurveTo(0,mY+3+smC,mW,mY);
      X.strokeStyle='#a06060';X.lineWidth=2.5;X.lineCap='round';X.stroke();
    }

    // Tongue
    if(tongueOut>0.1){
      const tL=tongueOut*32;
      X.beginPath();X.ellipse(0,mY+mH+tL*0.4,13,tL*0.55,0,0,Math.PI*2);
      X.fillStyle='#d87070';X.fill();X.strokeStyle='#c06060';X.lineWidth=1;X.stroke();
      X.beginPath();X.moveTo(0,mY+mH);X.lineTo(0,mY+mH+tL*0.8);
      X.strokeStyle='rgba(0,0,0,0.08)';X.lineWidth=0.8;X.stroke();
    }

    // Jaw clench
    if(jaw>0.1){
      [-1,1].forEach(s=>{
        X.beginPath();X.ellipse(s*85,18,7+jaw*5,18,s*0.2,0,Math.PI*2);
        X.fillStyle=`rgba(200,160,100,${jaw*0.25})`;X.fill();
      });
    }

    // Age spots
    [[30,-70,3],[62,5,2.5],[-55,40,2],[-30,90,2.5],[45,85,2]].forEach(([sx,sy,sr])=>{
      X.beginPath();X.arc(sx,sy,sr,0,Math.PI*2);
      X.fillStyle='rgba(140,100,60,0.15)';X.fill();
    });

    // ‚ïê‚ïê AI TRACKING OVERLAYS ‚ïê‚ïê
    // Mesh grid
    X.globalAlpha=0.06;X.strokeStyle='#1de9b6';X.lineWidth=0.4;
    for(let i=-7;i<=7;i++){
      X.beginPath();X.moveTo(i*15,-135);X.lineTo(i*15,155);X.stroke();
      X.beginPath();X.moveTo(-110,i*20);X.lineTo(110,i*20);X.stroke();
    }
    X.globalAlpha=1;

    // Face oval
    X.beginPath();X.ellipse(0,0,103,130,0,0,Math.PI*2);
    X.strokeStyle='rgba(29,233,182,0.4)';X.lineWidth=1.5;X.setLineDash([6,4]);X.stroke();X.setLineDash([]);

    // Eye boxes
    [-1,1].forEach(s=>{
      X.strokeStyle='rgba(68,138,255,0.5)';X.lineWidth=1;
      X.strokeRect(s*40-28,-48,56,40);
      X.beginPath();X.arc(s*40+eyeX*10,-28+eyeY*7,13,0,Math.PI*2);
      X.strokeStyle='rgba(179,136,255,0.6)';X.lineWidth=1.2;X.stroke();
    });

    // Mouth box
    X.strokeStyle='rgba(255,82,82,0.4)';X.lineWidth=1;
    X.strokeRect(-45,57,90,45+mouthOpen*28);

    // Landmark dots
    const lm=[[0,-125],[0,130],[-98,0],[98,0],[-40,-28],[40,-28],[0,38],[0,72+mouthOpen*14],
      [-40+eyeX*10,-28+eyeY*7],[40+eyeX*10,-28+eyeY*7],[-70,18],[70,18],[0,-58],
      [-85,shY-5],[85,shY-5]];
    lm.forEach(([lx,ly])=>{
      X.beginPath();X.arc(lx,ly,2.5,0,Math.PI*2);X.fillStyle='rgba(29,233,182,0.8)';X.fill();
      X.beginPath();X.arc(lx,ly,5,0,Math.PI*2);X.strokeStyle='rgba(29,233,182,0.2)';X.lineWidth=0.8;X.stroke();
    });

    // Data readouts
    X.font='8px "IBM Plex Mono"';X.fillStyle='rgba(29,233,182,0.5)';
    X.fillText('EYE_L',-70,-52);X.fillText('EYE_R',18,-52);
    X.fillText(`IRIS: ${(eyeX*10).toFixed(1)},${(eyeY*7).toFixed(1)}`,-100,-10);
    X.fillText(`MOUTH: ${mouthOpen.toFixed(2)}`,50,65);
    if(tongueOut>0.1) X.fillText(`TONGUE: ${tongueOut.toFixed(2)}`,50,80);
    if(jaw>0.1) X.fillText(`JAW: ${jaw.toFixed(2)}`,-100,25);
    if(shrug>0.1) X.fillText(`SHRUG: ${shrug.toFixed(2)}`,-110,shY-15);

    // Scan line effect
    const scanY=((t*2)%400)-200;
    X.strokeStyle='rgba(29,233,182,0.06)';X.lineWidth=40;
    X.beginPath();X.moveTo(-120,scanY);X.lineTo(120,scanY);X.stroke();

    X.restore();
    requestAnimationFrame(draw);
  },[cnStep,phase,elapsed]);

  useEffect(()=>{
    const c=ref.current;if(!c)return;
    const p=c.parentElement;
    c.width=p.clientWidth;c.height=p.clientHeight;
    const ro=new ResizeObserver(()=>{c.width=p.clientWidth;c.height=p.clientHeight;});
    ro.observe(p);
    draw();
    return()=>ro.disconnect();
  },[draw]);

  return React.createElement('canvas',{ref,style:{display:'block',width:'100%',height:'100%'}});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// COMPONENTS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function TopBar({screen,setScreen}){
  const [time,setTime]=useState('');
  useEffect(()=>{const i=setInterval(()=>setTime(new Date().toTimeString().split(' ')[0]),1000);return()=>clearInterval(i);},[]);

  const tabs=[
    {id:'assess',label:'Live Assessment',icon:'‚óâ'},
    {id:'alerts',label:'Clinical Alerts',icon:'‚ö†'},
    {id:'history',label:'Patient History',icon:'üìà'},
  ];
  return React.createElement('div',{style:{height:56,background:'var(--s1)',borderBottom:'1px solid var(--bdr)',display:'flex',alignItems:'center',justifyContent:'space-between',padding:'0 20px',flexShrink:0}},
    React.createElement('div',{style:{display:'flex',alignItems:'center',gap:14}},
      React.createElement('div',{style:{width:36,height:36,borderRadius:10,background:'linear-gradient(135deg,var(--teal2),var(--teal))',display:'flex',alignItems:'center',justifyContent:'center',fontWeight:900,fontSize:14,color:'#000'}},'N'),
      React.createElement('div',null,
        React.createElement('div',{style:{fontWeight:800,fontSize:15,letterSpacing:-.3}},'NeuroCheck',React.createElement('span',{style:{color:'var(--teal)'}},'AI')),
      ),
      React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:10,background:'var(--tealG)',color:'var(--teal)',padding:'3px 8px',borderRadius:6,border:'1px solid rgba(29,233,182,.15)',fontWeight:600}},'PROTOTYPE'),
    ),
    React.createElement('div',{style:{display:'flex',gap:2}},
      ...tabs.map(t=>React.createElement('button',{key:t.id,onClick:()=>setScreen(t.id),style:{padding:'8px 16px',borderRadius:8,border:'1px solid '+(screen===t.id?'var(--teal)':'transparent'),background:screen===t.id?'var(--tealG)':'transparent',color:screen===t.id?'var(--teal)':'var(--tx2)',fontSize:12,fontWeight:600,cursor:'pointer',fontFamily:'var(--f)',display:'flex',alignItems:'center',gap:6,transition:'all .2s'}},t.icon,' ',t.label))
    ),
    React.createElement('div',{style:{display:'flex',alignItems:'center',gap:14}},
      React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:9,color:'var(--tx3)',background:'var(--s2)',padding:'4px 10px',borderRadius:6,border:'1px solid var(--bdr)'}},'Patent: AI-Based Assessment + Continuous Monitoring'),
      React.createElement('div',{style:{display:'flex',alignItems:'center',gap:6}},
        React.createElement('div',{style:{width:7,height:7,borderRadius:'50%',background:'var(--green)',boxShadow:'0 0 8px var(--green)',animation:'pulse 2s infinite'}}),
        React.createElement('span',{style:{fontSize:12,color:'var(--green)',fontWeight:600}},'Active'),
      ),
      React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:13,color:'var(--tx2)'}},time),
    ),
  );
}

function PatientSidebar(){
  return React.createElement('div',{style:{width:260,background:'var(--s1)',borderRight:'1px solid var(--bdr)',padding:16,overflowY:'auto',flexShrink:0}},
    React.createElement('div',{style:{fontSize:10,fontWeight:700,textTransform:'uppercase',letterSpacing:1.5,color:'var(--tx3)',marginBottom:12}},'Patient'),
    React.createElement('div',{style:{background:'var(--s2)',borderRadius:12,padding:14,border:'1px solid var(--bdr)',marginBottom:14}},
      React.createElement('div',{style:{fontWeight:700,fontSize:15}},PATIENT.name),
      React.createElement('div',{style:{fontFamily:'var(--m)',fontSize:10,color:'var(--tx3)',marginTop:2}},PATIENT.mrn,' ‚Ä¢ ',PATIENT.age,PATIENT.sex,' ‚Ä¢ BMI ',PATIENT.bmi),
      React.createElement('div',{style:{display:'flex',flexWrap:'wrap',gap:4,marginTop:10}},
        React.createElement('span',{style:{fontSize:9,padding:'3px 7px',borderRadius:5,fontWeight:600,fontFamily:'var(--m)',background:'var(--redG)',color:'var(--red)',border:'1px solid rgba(255,82,82,.2)'}},PATIENT.bed),
        React.createElement('span',{style:{fontSize:9,padding:'3px 7px',borderRadius:5,fontWeight:600,fontFamily:'var(--m)',background:'var(--amberG)',color:'var(--amber)',border:'1px solid rgba(255,171,64,.2)'}},'CFS 5'),
        React.createElement('span',{style:{fontSize:9,padding:'3px 7px',borderRadius:5,fontWeight:600,fontFamily:'var(--m)',background:'var(--blueG)',color:'var(--blue)',border:'1px solid rgba(68,138,255,.2)'}},'POST-OP D2'),
      ),
      React.createElement('div',{style:{marginTop:10,fontSize:10,color:'var(--tx3)',lineHeight:1.6,fontFamily:'var(--m)'}},
        'Dx: ',PATIENT.dx,React.createElement('br'),
        'Hx: ',PATIENT.hx,React.createElement('br'),
        'Attending: ',PATIENT.attending,
      ),
    ),
    React.createElement('div',{style:{fontSize:10,fontWeight:700,textTransform:'uppercase',letterSpacing:1.5,color:'var(--tx3)',marginBottom:10}},'Camera Config'),
    React.createElement('div',{style:{background:'var(--s2)',borderRadius:10,padding:12,border:'1px solid var(--bdr)',fontSize:10,color:'var(--tx2)',lineHeight:1.8}},
      React.createElement('div',{style:{fontFamily:'var(--m)',fontSize:9,fontWeight:700,color:'var(--teal)',marginBottom:6,letterSpacing:.5}},'ICU HARDWARE ‚Äî PER PATENT'),
      React.createElement('div',null,'‚Ä¢ ',React.createElement('b',null,'Bedside:'),' Intel RealSense D435i'),
      React.createElement('div',null,'‚Ä¢ ',React.createElement('b',null,'Foot-of-Bed:'),' Axis M3068-P'),
      React.createElement('div',null,'‚Ä¢ ',React.createElement('b',null,'Edge:'),' NVIDIA Jetson Orin Nano'),
      React.createElement('div',{style:{marginTop:6,paddingTop:6,borderTop:'1px solid var(--bdr)',fontSize:9,color:'var(--tx3)'}},'HL7 FHIR R4 ‚Ä¢ HIPAA Compliant'),
    ),
  );
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SCREEN 1: LIVE ASSESSMENT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function AssessmentScreen(){
  const [cnStep,setCnStep]=useState(-1);
  const [cnResults,setCnResults]=useState({});
  const [phase,setPhase]=useState('init');
  const [gcs,setGcs]=useState({e:'‚Äî',v:'‚Äî',m:'‚Äî',total:'‚Äî'});
  const [cam,setCam]=useState({score:'‚Äî',rass:'‚Äî',acute:'‚Äî',inatt:'‚Äî',disorg:'‚Äî',alter:'‚Äî'});
  const [frail,setFrail]=useState({cfs:'‚Äî',temp:'‚Äî',grip:'‚Äî',fall:'‚Äî',score:'‚Äî'});
  const [alertFired,setAlertFired]=useState(false);

  useEffect(()=>{
    const seq=async()=>{
      await wait(2000);
      // CN Tests
      for(let i=0;i<CN_TESTS.length;i++){
        setCnStep(i);setPhase('cn');
        await wait(CN_TESTS[i].dur);
        setCnResults(p=>({...p,[CN_TESTS[i].id]:'pass'}));
      }
      setCnStep(-1);
      // GCS
      setPhase('gcs');await wait(1500);
      setGcs(p=>({...p,e:'4'}));await wait(1200);
      setGcs(p=>({...p,v:'5'}));await wait(1200);
      setGcs(p=>({...p,m:'6',total:'15/15'}));await wait(1500);
      // Delirium
      setPhase('delirium');await wait(1000);
      setCam(p=>({...p,rass:'-1'}));await wait(1200);
      setCam(p=>({...p,acute:'Yes'}));await wait(1200);
      setCam(p=>({...p,inatt:'+1'}));await wait(1200);
      setCam(p=>({...p,disorg:'No',alter:'+1',score:'3/7'}));await wait(1500);
      setAlertFired(true);
      // Frailty
      setPhase('frailty');await wait(1000);
      setFrail(p=>({...p,cfs:'5/9'}));await wait(1200);
      setFrail(p=>({...p,temp:'7.8mm ‚Üì'}));await wait(1200);
      setFrail(p=>({...p,grip:'14.2 kg ‚Üì'}));await wait(1200);
      setFrail(p=>({...p,fall:'HIGH',score:'5/9'}));await wait(2000);
      setPhase('complete');
    };
    seq();
  },[]);

  const wait=(ms)=>new Promise(r=>setTimeout(r,ms));

  return React.createElement('div',{style:{display:'flex',flex:1,overflow:'hidden'}},
    React.createElement(PatientSidebar),
    // Main video area
    React.createElement('div',{style:{flex:1,position:'relative',background:'#050810',overflow:'hidden'}},
      React.createElement(FaceCanvas,{cnStep,phase}),
      // Camera label
      React.createElement('div',{style:{position:'absolute',top:14,left:14,display:'flex',alignItems:'center',gap:8,background:'rgba(0,0,0,.7)',backdropFilter:'blur(10px)',padding:'6px 14px',borderRadius:8,fontSize:11,fontFamily:'var(--m)',color:'var(--tx)'}},
        React.createElement('div',{style:{width:7,height:7,borderRadius:'50%',background:'var(--red)',animation:'pulse 1s infinite'}}),
        'LIVE ‚Äî CAM 1: Intel RealSense D435i'
      ),
      React.createElement('div',{style:{position:'absolute',top:14,right:14,background:'rgba(0,0,0,.7)',backdropFilter:'blur(10px)',padding:'6px 14px',borderRadius:8,fontSize:11,fontFamily:'var(--m)',color:'var(--teal)'}},'30 FPS ‚Ä¢ 468 landmarks ‚Ä¢ CNN active'),
      // CN Prompt
      cnStep>=0 && React.createElement('div',{style:{position:'absolute',top:'8%',left:'50%',transform:'translateX(-50%)',background:'rgba(0,0,0,.88)',backdropFilter:'blur(16px)',padding:'22px 36px',borderRadius:16,textAlign:'center',border:'1px solid var(--teal)',boxShadow:'0 0 50px rgba(29,233,182,.1)',animation:'fadeIn .3s',zIndex:10}},
        React.createElement('div',{style:{fontSize:20,fontWeight:800,color:'var(--teal)',marginBottom:4}},CN_TESTS[cnStep].prompt),
        React.createElement('div',{style:{fontSize:12,color:'var(--tx2)'}},CN_TESTS[cnStep].desc),
      ),
      // Phase label
      phase==='complete' && React.createElement('div',{style:{position:'absolute',top:'8%',left:'50%',transform:'translateX(-50%)',background:'rgba(0,0,0,.88)',backdropFilter:'blur(16px)',padding:'22px 36px',borderRadius:16,textAlign:'center',border:'1px solid var(--green)',boxShadow:'0 0 50px rgba(105,240,174,.1)',animation:'fadeIn .3s'}},
        React.createElement('div',{style:{fontSize:20,fontWeight:800,color:'var(--green)'}},'‚úì Assessment Complete'),
        React.createElement('div',{style:{fontSize:12,color:'var(--tx2)'}},'Results transmitted to PredictWell CommandOS ‚Üí EHR'),
      ),
      // Alert banner
      alertFired && React.createElement('div',{style:{position:'absolute',bottom:50,left:'50%',transform:'translateX(-50%)',background:'rgba(255,82,82,.12)',border:'1px solid rgba(255,82,82,.4)',backdropFilter:'blur(10px)',padding:'10px 24px',borderRadius:10,display:'flex',alignItems:'center',gap:10,animation:'alertPulse 2s infinite'}},
        React.createElement('div',{style:{fontSize:14}},'üö®'),
        React.createElement('div',null,
          React.createElement('div',{style:{fontSize:11,fontWeight:700,color:'var(--red)'}},'ALERT: Delirium Score Increase Detected'),
          React.createElement('div',{style:{fontSize:10,color:'var(--tx2)'}},'CAM-ICU-7: 3/7 ‚Äî Notify attending physician'),
        ),
      ),
      // Tracking bar
      React.createElement('div',{style:{position:'absolute',bottom:14,left:14,background:'rgba(0,0,0,.7)',backdropFilter:'blur(10px)',padding:'7px 16px',borderRadius:8,fontSize:11,fontWeight:600,color:'var(--teal)',display:'flex',alignItems:'center',gap:8}},
        React.createElement('div',{style:{width:6,height:6,borderRadius:'50%',background:'var(--green)',boxShadow:'0 0 6px var(--green)'}}),
        'Face Detected ‚Äî 468 Landmarks'
      ),
    ),
    // Right scoring panel
    React.createElement('div',{style:{width:300,background:'var(--s1)',borderLeft:'1px solid var(--bdr)',padding:14,overflowY:'auto',flexShrink:0}},
      React.createElement('div',{style:{fontSize:10,fontWeight:700,textTransform:'uppercase',letterSpacing:1.5,color:'var(--tx3)',marginBottom:12}},'Live Scoring'),
      // GCS
      React.createElement('div',{style:{background:'var(--s2)',borderRadius:11,padding:13,marginBottom:9,border:'1px solid '+(phase==='gcs'?'var(--teal)':'var(--bdr)'),transition:'border-color .3s'}},
        React.createElement('div',{style:{display:'flex',justifyContent:'space-between',marginBottom:8}},
          React.createElement('span',{style:{fontSize:11,fontWeight:700,textTransform:'uppercase',letterSpacing:1,color:'var(--blue)'}},'Glasgow Coma Scale'),
          React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:18,fontWeight:800,color:gcs.total!=='‚Äî'?'var(--green)':'var(--tx3)'}},gcs.total),
        ),
        React.createElement('div',{style:{height:4,borderRadius:2,background:'var(--s3)',marginBottom:8,overflow:'hidden'}},
          React.createElement('div',{style:{height:'100%',borderRadius:2,background:'var(--green)',width:gcs.total!=='‚Äî'?'100%':'0%',transition:'width .8s'}}),
        ),
        [{l:'Eye Opening (E)',v:gcs.e},{l:'Verbal (V)',v:gcs.v},{l:'Motor (M)',v:gcs.m}].map(({l,v})=>
          React.createElement('div',{key:l,style:{display:'flex',justifyContent:'space-between',fontSize:11,marginBottom:4}},
            React.createElement('span',{style:{color:'var(--tx2)'}},l),
            React.createElement('span',{style:{fontFamily:'var(--m)',fontWeight:600,color:v!=='‚Äî'?'var(--tx)':'var(--tx3)'}},v),
          )
        ),
      ),
      // CN Grid
      React.createElement('div',{style:{background:'var(--s2)',borderRadius:11,padding:13,marginBottom:9,border:'1px solid '+(phase==='cn'?'var(--teal)':'var(--bdr)')}},
        React.createElement('div',{style:{display:'flex',justifyContent:'space-between',marginBottom:8}},
          React.createElement('span',{style:{fontSize:11,fontWeight:700,textTransform:'uppercase',letterSpacing:1,color:'var(--purple)'}},'Cranial Nerves'),
          React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:14,fontWeight:800,color:Object.keys(cnResults).length===10?'var(--green)':'var(--tx3)'}},Object.keys(cnResults).length,'/10'),
        ),
        React.createElement('div',{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:3}},
          ...CN_TESTS.map(test=>{
            const status=cnResults[test.id]?'pass':cnStep>=0&&CN_TESTS[cnStep].id===test.id?'testing':'pending';
            return React.createElement('div',{key:test.id,style:{display:'flex',alignItems:'center',gap:5,padding:'4px 7px',borderRadius:5,background:status==='testing'?'var(--amberG)':status==='pass'?'var(--greenG)':'var(--s3)',fontSize:9,fontFamily:'var(--m)',transition:'background .3s'}},
              React.createElement('div',{style:{width:5,height:5,borderRadius:'50%',background:status==='pass'?'var(--green)':status==='testing'?'var(--amber)':'var(--tx3)',boxShadow:status==='pass'?'0 0 5px var(--green)':'none',animation:status==='testing'?'pulse .8s infinite':'none'}}),
              'CN ',test.id
            );
          })
        ),
      ),
      // CAM-ICU
      React.createElement('div',{style:{background:'var(--s2)',borderRadius:11,padding:13,marginBottom:9,border:'1px solid '+(phase==='delirium'?'var(--red)':'var(--bdr)')}},
        React.createElement('div',{style:{display:'flex',justifyContent:'space-between',marginBottom:8}},
          React.createElement('span',{style:{fontSize:11,fontWeight:700,textTransform:'uppercase',letterSpacing:1,color:'var(--red)'}},'CAM-ICU-7 Delirium'),
          React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:18,fontWeight:800,color:cam.score!=='‚Äî'?'var(--amber)':'var(--tx3)'}},cam.score),
        ),
        React.createElement('div',{style:{height:4,borderRadius:2,background:'var(--s3)',marginBottom:8,overflow:'hidden'}},
          React.createElement('div',{style:{height:'100%',borderRadius:2,background:'var(--amber)',width:cam.score!=='‚Äî'?'43%':'0%',transition:'width .8s'}}),
        ),
        [{l:'RASS',v:cam.rass},{l:'Acute Onset',v:cam.acute},{l:'Inattention',v:cam.inatt},{l:'Disorganized',v:cam.disorg},{l:'Altered Consciousness',v:cam.alter}].map(({l,v})=>
          React.createElement('div',{key:l,style:{display:'flex',justifyContent:'space-between',fontSize:11,marginBottom:4}},
            React.createElement('span',{style:{color:'var(--tx2)'}},l),
            React.createElement('span',{style:{fontFamily:'var(--m)',fontWeight:600,color:v==='‚Äî'?'var(--tx3)':v==='No'?'var(--green)':'var(--amber)'}},v),
          )
        ),
      ),
      // Frailty
      React.createElement('div',{style:{background:'var(--s2)',borderRadius:11,padding:13,border:'1px solid '+(phase==='frailty'?'var(--amber)':'var(--bdr)')}},
        React.createElement('div',{style:{display:'flex',justifyContent:'space-between',marginBottom:8}},
          React.createElement('span',{style:{fontSize:11,fontWeight:700,textTransform:'uppercase',letterSpacing:1,color:'var(--amber)'}},'Frailty Index'),
          React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:18,fontWeight:800,color:frail.score!=='‚Äî'?'var(--amber)':'var(--tx3)'}},frail.score),
        ),
        React.createElement('div',{style:{height:4,borderRadius:2,background:'var(--s3)',marginBottom:8,overflow:'hidden'}},
          React.createElement('div',{style:{height:'100%',borderRadius:2,background:'var(--amber)',width:frail.score!=='‚Äî'?'56%':'0%',transition:'width .8s'}}),
        ),
        [{l:'Clinical Frailty Scale',v:frail.cfs},{l:'Temporalis Thickness',v:frail.temp},{l:'Grip Strength',v:frail.grip},{l:'Fall Risk (Hopkins)',v:frail.fall}].map(({l,v})=>
          React.createElement('div',{key:l,style:{display:'flex',justifyContent:'space-between',fontSize:11,marginBottom:4}},
            React.createElement('span',{style:{color:'var(--tx2)'}},l),
            React.createElement('span',{style:{fontFamily:'var(--m)',fontWeight:600,color:v==='‚Äî'?'var(--tx3)':v.includes('‚Üì')||v==='HIGH'?'var(--red)':'var(--amber)'}},v),
          )
        ),
      ),
    ),
  );
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SCREEN 2: CLINICAL ALERTS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function AlertsScreen(){
  const sevColor={high:'var(--red)',medium:'var(--amber)',low:'var(--green)'};
  const sevBg={high:'var(--redG)',medium:'var(--amberG)',low:'var(--greenG)'};

  return React.createElement('div',{style:{flex:1,display:'flex',flexDirection:'column',overflow:'hidden'}},
    // Alert summary bar
    React.createElement('div',{style:{display:'flex',gap:12,padding:'16px 24px',background:'var(--s1)',borderBottom:'1px solid var(--bdr)'}},
      [{label:'Critical',count:2,color:'var(--red)',bg:'var(--redG)'},{label:'Warning',count:1,color:'var(--amber)',bg:'var(--amberG)'},{label:'Info',count:2,color:'var(--green)',bg:'var(--greenG)'}].map(a=>
        React.createElement('div',{key:a.label,style:{display:'flex',alignItems:'center',gap:8,padding:'8px 16px',borderRadius:8,background:a.bg,border:'1px solid '+a.color+'22'}},
          React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:22,fontWeight:800,color:a.color}},a.count),
          React.createElement('span',{style:{fontSize:11,fontWeight:600,color:a.color}},a.label),
        )
      ),
      React.createElement('div',{style:{marginLeft:'auto',display:'flex',alignItems:'center',gap:8}},
        React.createElement('span',{style:{fontSize:11,color:'var(--tx3)'}},'Patient: ',React.createElement('b',{style:{color:'var(--tx)'}},PATIENT.name)),
        React.createElement('span',{style:{fontSize:11,color:'var(--tx3)'}},' | ',PATIENT.bed),
      ),
    ),
    // Alert list
    React.createElement('div',{style:{flex:1,overflowY:'auto',padding:20,display:'flex',flexDirection:'column',gap:12}},
      ...ALERTS.map((a,i)=>
        React.createElement('div',{key:a.id,style:{background:'var(--s1)',borderRadius:14,border:'1px solid '+(a.severity==='high'?'rgba(255,82,82,.3)':a.severity==='medium'?'rgba(255,171,64,.2)':'var(--bdr)'),padding:0,overflow:'hidden',animation:`slideUp .4s ${i*0.08}s both`}},
          // Alert header
          React.createElement('div',{style:{display:'flex',alignItems:'center',gap:12,padding:'14px 18px',background:sevBg[a.severity],borderBottom:'1px solid var(--bdr)'}},
            React.createElement('div',{style:{width:10,height:10,borderRadius:'50%',background:sevColor[a.severity],boxShadow:'0 0 8px '+sevColor[a.severity],animation:a.severity==='high'?'pulse 1.5s infinite':'none'}}),
            React.createElement('div',{style:{flex:1}},
              React.createElement('div',{style:{fontWeight:700,fontSize:14,color:'var(--tx)'}},a.title),
              React.createElement('div',{style:{fontFamily:'var(--m)',fontSize:10,color:'var(--tx3)',marginTop:2}},a.time,' ‚Ä¢ ',a.module,' ‚Ä¢ Score: ',a.value),
            ),
            React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:10,padding:'4px 10px',borderRadius:6,fontWeight:700,textTransform:'uppercase',background:sevBg[a.severity],color:sevColor[a.severity],border:'1px solid '+sevColor[a.severity]+'33'}},a.severity),
          ),
          // Alert body
          React.createElement('div',{style:{padding:'14px 18px'}},
            React.createElement('div',{style:{fontSize:12,color:'var(--tx2)',lineHeight:1.7,marginBottom:12}},a.desc),
            React.createElement('div',{style:{background:'var(--s2)',borderRadius:8,padding:'10px 14px',border:'1px solid var(--bdr)'}},
              React.createElement('div',{style:{fontSize:9,fontWeight:700,textTransform:'uppercase',letterSpacing:1,color:'var(--teal)',marginBottom:6}},'Recommended Action'),
              React.createElement('div',{style:{fontSize:11,color:'var(--tx)',lineHeight:1.6}},a.action),
            ),
          ),
        )
      )
    ),
  );
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SCREEN 3: PATIENT HISTORY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function HistoryScreen(){
  const chartStyle={fontSize:10,fontFamily:'IBM Plex Mono'};

  return React.createElement('div',{style:{flex:1,overflowY:'auto',padding:20}},
    React.createElement('div',{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:20}},
      React.createElement('div',null,
        React.createElement('div',{style:{fontSize:20,fontWeight:800}},'Patient Trajectory ‚Äî ',PATIENT.name),
        React.createElement('div',{style:{fontFamily:'var(--m)',fontSize:11,color:'var(--tx3)',marginTop:4}},PATIENT.mrn,' ‚Ä¢ ',PATIENT.dx,' ‚Ä¢ ',PATIENT.attending),
      ),
      React.createElement('div',{style:{display:'flex',gap:8}},
        ['24h','48h','7d','30d'].map(r=>
          React.createElement('button',{key:r,style:{padding:'6px 12px',borderRadius:6,border:'1px solid '+(r==='48h'?'var(--teal)':'var(--bdr)'),background:r==='48h'?'var(--tealG)':'transparent',color:r==='48h'?'var(--teal)':'var(--tx3)',fontSize:11,fontWeight:600,cursor:'pointer',fontFamily:'var(--f)'}},r)
        )
      ),
    ),
    // Charts grid
    React.createElement('div',{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:16}},
      // GCS Trend
      React.createElement('div',{style:{background:'var(--s1)',borderRadius:14,padding:18,border:'1px solid var(--bdr)'}},
        React.createElement('div',{style:{display:'flex',justifyContent:'space-between',marginBottom:14}},
          React.createElement('span',{style:{fontSize:12,fontWeight:700,textTransform:'uppercase',letterSpacing:1,color:'var(--blue)'}},'GCS Trend'),
          React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:18,fontWeight:800,color:'var(--green)'}},'15/15'),
        ),
        React.createElement(ResponsiveContainer,{width:'100%',height:180},
          React.createElement(AreaChart,{data:GCS_HISTORY,style:chartStyle},
            React.createElement(CartesianGrid,{strokeDasharray:'3 3',stroke:'#1a2640'}),
            React.createElement(XAxis,{dataKey:'day',stroke:'#5a6a85',tick:{fontSize:9}}),
            React.createElement(YAxis,{domain:[3,15],stroke:'#5a6a85',tick:{fontSize:9}}),
            React.createElement(ReferenceLine,{y:13,stroke:'#ff5252',strokeDasharray:'4 4',label:{value:'Concern',fill:'#ff5252',fontSize:9}}),
            React.createElement(Area,{type:'monotone',dataKey:'gcs',stroke:'#448aff',fill:'rgba(68,138,255,.1)',strokeWidth:2,dot:{fill:'#448aff',r:4}}),
          )
        ),
      ),
      // Delirium Trend
      React.createElement('div',{style:{background:'var(--s1)',borderRadius:14,padding:18,border:'1px solid var(--bdr)'}},
        React.createElement('div',{style:{display:'flex',justifyContent:'space-between',marginBottom:14}},
          React.createElement('span',{style:{fontSize:12,fontWeight:700,textTransform:'uppercase',letterSpacing:1,color:'var(--red)'}},'CAM-ICU-7 / RASS'),
          React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:18,fontWeight:800,color:'var(--amber)'}},'3/7'),
        ),
        React.createElement(ResponsiveContainer,{width:'100%',height:180},
          React.createElement(LineChart,{data:DELIRIUM_HISTORY,style:chartStyle},
            React.createElement(CartesianGrid,{strokeDasharray:'3 3',stroke:'#1a2640'}),
            React.createElement(XAxis,{dataKey:'day',stroke:'#5a6a85',tick:{fontSize:9}}),
            React.createElement(YAxis,{stroke:'#5a6a85',tick:{fontSize:9}}),
            React.createElement(ReferenceLine,{y:3,stroke:'#ff5252',strokeDasharray:'4 4',label:{value:'Delirium',fill:'#ff5252',fontSize:9}}),
            React.createElement(Line,{type:'monotone',dataKey:'cam',stroke:'#ff5252',strokeWidth:2,dot:{fill:'#ff5252',r:4},name:'CAM-ICU-7'}),
            React.createElement(Line,{type:'monotone',dataKey:'rass',stroke:'#ffab40',strokeWidth:2,dot:{fill:'#ffab40',r:4},name:'RASS'}),
            React.createElement(Legend,{wrapperStyle:{fontSize:10}}),
          )
        ),
      ),
      // Frailty / Temporalis
      React.createElement('div',{style:{background:'var(--s1)',borderRadius:14,padding:18,border:'1px solid var(--bdr)'}},
        React.createElement('div',{style:{display:'flex',justifyContent:'space-between',marginBottom:14}},
          React.createElement('span',{style:{fontSize:12,fontWeight:700,textTransform:'uppercase',letterSpacing:1,color:'var(--amber)'}},'Frailty + Temporalis'),
          React.createElement('span',{style:{fontFamily:'var(--m)',fontSize:18,fontWeight:800,color:'var(--amber)'}},'CFS 5'),
        ),
        React.createElement(ResponsiveContainer,{width:'100%',height:180},
          React.createElement(LineChart,{data:FRAILTY_HISTORY,style:chartStyle},
            React.createElement(CartesianGrid,{strokeDasharray:'3 3',stroke:'#1a2640'}),
            React.createElement(XAxis,{dataKey:'day',stroke:'#5a6a85',tick:{fontSize:9}}),
            React.createElement(YAxis,{stroke:'#5a6a85',tick:{fontSize:9}}),
            React.createElement(ReferenceLine,{y:10,stroke:'#ff5252',strokeDasharray:'4 4',label:{value:'Sarcopenia',fill:'#ff5252',fontSize:9}}),
            React.createElement(Line,{type:'monotone',dataKey:'cfs',stroke:'#ffab40',strokeWidth:2,dot:{fill:'#ffab40',r:4},name:'CFS'}),
            React.createElement(Line,{type:'monotone',dataKey:'temp',stroke:'#ff5252',strokeWidth:2,dot:{fill:'#ff5252',r:4},name:'Temporalis (mm)'}),
            React.createElement(Legend,{wrapperStyle:{fontSize:10}}),
          )
        ),
      ),
      // Baseline Comparison
      React.createElement('div',{style:{background:'var(--s1)',borderRadius:14,padding:18,border:'1px solid var(--bdr)'}},
        React.createElement('div',{style:{fontSize:12,fontWeight:700,textTransform:'uppercase',letterSpacing:1,color:'var(--teal)',marginBottom:14}},'Baseline vs Current'),
        React.createElement(ResponsiveContainer,{width:'100%',height:180},
          React.createElement(BarChart,{data:[
            {metric:'GCS',baseline:11,current:15},{metric:'CFS',baseline:4,current:5},
            {metric:'CAM',baseline:5,current:3},{metric:'Grip(kg)',baseline:16.1,current:14.2},
            {metric:'Temp(mm)',baseline:9.2,current:7.8},
          ],style:chartStyle},
            React.createElement(CartesianGrid,{strokeDasharray:'3 3',stroke:'#1a2640'}),
            React.createElement(XAxis,{dataKey:'metric',stroke:'#5a6a85',tick:{fontSize:9}}),
            React.createElement(YAxis,{stroke:'#5a6a85',tick:{fontSize:9}}),
            React.createElement(Bar,{dataKey:'baseline',fill:'rgba(68,138,255,.4)',name:'Pre-Op Baseline',radius:[4,4,0,0]}),
            React.createElement(Bar,{dataKey:'current',fill:'rgba(29,233,182,.5)',name:'Current (Day 2)',radius:[4,4,0,0]}),
            React.createElement(Legend,{wrapperStyle:{fontSize:10}}),
          )
        ),
      ),
    ),
    // Integration pipeline
    React.createElement('div',{style:{marginTop:16,background:'var(--s1)',borderRadius:14,padding:18,border:'1px solid var(--bdr)'}},
      React.createElement('div',{style:{fontSize:12,fontWeight:700,textTransform:'uppercase',letterSpacing:1,color:'var(--teal)',marginBottom:14}},'PredictWell CommandOS Integration Pipeline'),
      React.createElement('div',{style:{display:'flex',gap:8,alignItems:'center',flexWrap:'wrap'}},
        ['Multi-Camera Capture','‚Üí','Edge AI (CNN+LSTM)','‚Üí','Assessment Scoring','‚Üí','CommandOS Dashboard','‚Üí','EHR (HL7 FHIR)','‚Üí','UPI Longitudinal DB'].map((s,i)=>
          s==='‚Üí'?React.createElement('span',{key:i,style:{color:'var(--teal)',fontSize:18}},'‚Üí'):
          React.createElement('div',{key:i,style:{padding:'8px 14px',borderRadius:8,background:'var(--tealG)',border:'1px solid rgba(29,233,182,.15)',fontSize:11,fontWeight:600,color:'var(--teal)',fontFamily:'var(--m)'}},s)
        )
      ),
    ),
  );
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// APP
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function App(){
  const [screen,setScreen]=useState('assess');
  return React.createElement('div',{style:{height:'100vh',display:'flex',flexDirection:'column',background:'var(--bg)'}},
    React.createElement(TopBar,{screen,setScreen}),
    React.createElement('div',{style:{flex:1,display:'flex',overflow:'hidden'}},
      screen==='assess' && React.createElement(AssessmentScreen),
      screen==='alerts' && React.createElement(AlertsScreen),
      screen==='history' && React.createElement(HistoryScreen),
    ),
  );
}

ReactDOM.render(React.createElement(App),document.getElementById('root'));
</script>
</body>
</html>
